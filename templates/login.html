<!-- <html>
    <head>
        <meta charset="UTF-8">
        <title> Login </title>
        <link rel="stylesheet" href="{{ url_for('static', filename='index.css') }}">           
    </head>
    <body></br></br></br></br></br>
        <div align="center">
          <div align="center" class="border">
             <div class="header">
                <h1 class="word">Login</h1>
             </div></br></br></br>
            <h2 class="word">
                <form action="{{ url_for('login') }}" method="post">
                  <div class="msg">{{ msg }}</div>
                    <input id="username" name="username" type="text" placeholder="Enter Your Username" class="textbox"/></br></br>
                    <input id="password" name="password" type="password" placeholder="Enter Your Password" class="textbox"/></br></br></br>
                    <input type="submit" class="btn" value="Sign In"></br></br>
                </form>
            </h2>
            <p class="bottom">Dont't have an account?  <a class="bottom" href="{{url_for('signup')}}"> Sign Up here</a></p>
          </div>
        </div>
    </body>
</html>



 -->




<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.3/font/bootstrap-icons.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <title>Book</title>
<style>
    .card-body{
        
        border-radius: 10px;
    }
    </style>

</head>
<body style="background-image:url('https://media.istockphoto.com/photos/bookshelves-in-the-library-with-old-books-3d-render-picture-id1082069478?k=20&m=1082069478&s=612x612&w=0&h=eIZU121Pb1h5Kd9S1R_jv3lCUbiZ0luQyHWDAPZZpNo=');background-repeat:no-repeat;background-size:cover;">
    <h1 style="color:white; font-size:2.5rem">{{session['user']}}</h1>
    <div class="container">
        <div class="row">
            <div class="col-lg-6 m-auto" >
                <div class="card " style="margin-top:25vh;background-color:#bf9d15">
                    <div class="card-body">
                        <h4 class="text-center text-dark  p-3" style="background-color:lightgray;">Login</h4>
                        <div class="form" >
                            <div class="input-group">
                                <i class="bi bi-envelope input-group-text"></i>
                                <input type="email" class="form-control" name="email" placeholder="Your email" id="email" required>
                            </div>
                            <div class="input-group mt-2">
                                <i class="bi bi-lock input-group-text"></i>
                                <input type="password" class="form-control " name='password' placeholder="your password" id="password" required>
                            </div>
                            
                            <p class="bottom">Dont't have an account?  <a class="bottom" href="{{url_for('signup')}}"> Sign Up here</a></p>
                            <button type="submit" name='log' class="btn btn-outline-dark text-white mt-4 w-100 float-end" id="login">login</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        $(document).ready(function(){
            let email = document.getElementById('email')
            let password= document.getElementById('password')
            let e=0;
            let p=0;
            email.value=""
            password.value=""
            document.getElementById('login').addEventListener('click',function(){
                if(email.value!= '' && email.value!= null){
                    e=1;
                }
                if(password.value!='' && password.value!=null){
                    p=1;
                }
                if(e==1 && p==1){
                    $.ajax({
                        url:'/login',
                        type:"get",
                        data:{
                            email: email.value,
                            password: password.value
                        },
                        success: (response)=>{
                            if (response.em=='done'){
                                window.location.href='{{url_for("home")}}';
                            }
                            else{
                                alert('Invalid login credential')
                            }
                        }
                    })
                }
                else{
                    if(e!=1 && p==1){
                        alert("You can't leave email empty")
                    }
                    else if(e==1 && p!=1){
                        alert("You can't leave password empty")
                    }
                    else if( e!=1 && p!=1){
                        alert("Enter valid email and password")
                    }
                }
            })
        })
    </script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
</body>
</html>

